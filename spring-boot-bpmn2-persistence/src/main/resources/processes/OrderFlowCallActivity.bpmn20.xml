<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:activiti="http://activiti.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://www.activiti.org/processdef">
  <process id="OrderFlowCallActivity" name="OrderFlowCallActivity" isExecutable="true">
    <startEvent id="startPayment" name="Start payment"></startEvent>
    <serviceTask id="payment" name="Payment" activiti:expression="#{waitingServiceTask.receive(order)}"></serviceTask>
    <endEvent id="endPayment" name="End payment"></endEvent>
    <callActivity id="callPaymentMethod" name="Call payment method" calledElement="cashPaymentProcessor" activiti:inheritVariables="true">
      <extensionElements>
        <activiti:in source="order" target="order"></activiti:in>
      </extensionElements>
    </callActivity>
    <sequenceFlow id="sid-744B2E25-6CDC-429E-95B9-77D1E304F63A" sourceRef="payment" targetRef="callPaymentMethod"></sequenceFlow>
    <sequenceFlow id="sid-4D730EFF-9F4F-41CD-9D63-6A3A48AD3EA9" sourceRef="startPayment" targetRef="payment"></sequenceFlow>
    <serviceTask id="cook" name="Cook" activiti:expression="#{cookingServiceTask.cook(order)}" activiti:resultVariableName="order"></serviceTask>
    <sequenceFlow id="sid-05FAB1F5-B53E-4268-B433-E597BC069782" sourceRef="callPaymentMethod" targetRef="cook"></sequenceFlow>
    <sequenceFlow id="sid-120F67F1-82F5-4509-B665-A1C4F1B0FC72" sourceRef="cook" targetRef="endPayment"></sequenceFlow>
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_OrderFlowCallActivity">
    <bpmndi:BPMNPlane bpmnElement="OrderFlowCallActivity" id="BPMNPlane_OrderFlowCallActivity">
      <bpmndi:BPMNShape bpmnElement="startPayment" id="BPMNShape_startPayment">
        <omgdc:Bounds height="30.0" width="30.0" x="135.0" y="130.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="payment" id="BPMNShape_payment">
        <omgdc:Bounds height="80.0" width="100.0" x="255.0" y="105.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="endPayment" id="BPMNShape_endPayment">
        <omgdc:Bounds height="28.0" width="28.0" x="840.0" y="131.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="callPaymentMethod" id="BPMNShape_callPaymentMethod">
        <omgdc:Bounds height="80.0" width="100.0" x="435.0" y="105.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="cook" id="BPMNShape_cook">
        <omgdc:Bounds height="80.0" width="100.0" x="645.0" y="105.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="sid-744B2E25-6CDC-429E-95B9-77D1E304F63A" id="BPMNEdge_sid-744B2E25-6CDC-429E-95B9-77D1E304F63A">
        <omgdi:waypoint x="355.0" y="145.0"></omgdi:waypoint>
        <omgdi:waypoint x="435.0" y="145.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-120F67F1-82F5-4509-B665-A1C4F1B0FC72" id="BPMNEdge_sid-120F67F1-82F5-4509-B665-A1C4F1B0FC72">
        <omgdi:waypoint x="745.0" y="145.0"></omgdi:waypoint>
        <omgdi:waypoint x="840.0" y="145.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-4D730EFF-9F4F-41CD-9D63-6A3A48AD3EA9" id="BPMNEdge_sid-4D730EFF-9F4F-41CD-9D63-6A3A48AD3EA9">
        <omgdi:waypoint x="165.0" y="145.0"></omgdi:waypoint>
        <omgdi:waypoint x="255.0" y="145.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-05FAB1F5-B53E-4268-B433-E597BC069782" id="BPMNEdge_sid-05FAB1F5-B53E-4268-B433-E597BC069782">
        <omgdi:waypoint x="535.0" y="145.0"></omgdi:waypoint>
        <omgdi:waypoint x="645.0" y="145.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>